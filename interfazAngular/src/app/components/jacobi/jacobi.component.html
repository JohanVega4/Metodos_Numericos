<div class="row">
    <div class="col-sm-5">
        <div class="card">
            <div class="card-body text-center">
                <span class="titulo">Método de Jacobi</span>
                <p>
                    El valor de cada componente x<sub>i</sub> se calcula utilizando la fórmula:
                </p>
                <p>
                    x<sub>i</sub><sup>(k+1)</sup> = (1 / a<sub>ii</sub>) * (b<sub>i</sub> - Σ a<sub>ij</sub> * x<sub>j</sub><sup>(k)</sup>),
                    con i ≠ j.
                </p>
            </div>
        </div>
    </div>

    <div class="col-sm-5">
        <div class="card">
            <div class="card-body text-center">
                <span class="titulo">{{titulo}}</span>

                <!-- Formulario para tamaño de matriz -->
                <form (ngSubmit)="generar()">
                    <div class="form-group">
                        <label for="matrixSize">Tamaño de la matriz</label>
                        <input type="number" id="matrizSize"
                               [(ngModel)]="matrizSize"
                               name="matrizSize"
                               class="form-control"
                               min="2"
                               required>
                    </div>
                    <br>
                    <button type="submit" class="btn btn-primary">Generar matriz</button>
                </form>

                <!-- Matriz de coeficientes -->
                <div *ngIf="matriz" class="mt-3">
                    <label>Matriz de Coeficientes:</label>
                    <div *ngFor="let row of matriz; let rowIndex = index" class="matrix-row">
                        <div *ngFor="let col of row; let colIndex = index" class="matrix-col">
                            <input type="text"
                                   [(ngModel)]="matriz[rowIndex][colIndex]"
                                   class="form-control matrix-input"
                                   placeholder="Ej: 3x{{colIndex + 1}}">
                        </div>
                    </div>
                </div>

                <!-- Vector de términos independientes -->
                <div class="mt-3">
                    <label>Vector Resultado:</label>
                    <div *ngFor="let val of vector; let i = index" class="matrix-row">
                        <input type="text"
                               [(ngModel)]="vector[i]"
                               class="form-control matrix-input"
                               placeholder="Ej: 5">
                    </div>
                </div>

                <!-- Botón de cálculo -->
                <button (click)="calculate()" class="btn btn-success mt-3">Calcular</button>
            </div>
        </div>
    </div>

    <div class="col-sm-7">
        <div class="card">
            <div class="card-body text-center">
                <span class="titulo">Resultados</span>
                <br>

                <!-- Solución -->
                <div *ngIf="resultado.length">
                    <table class="table table-striped mt-3">
                        <thead>
                            <tr>
                                <th scope="col">Variable</th>
                                <th scope="col">Valor</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let res of resultado; let i = index">
                                <td>x{{i + 1}}</td>
                                <td>{{res | number:'1.6-6'}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Iteraciones -->
                <br>
                <span class="titulo">Iteraciones</span>
                <div *ngIf="iteraciones.length">
                    <table class="table table-striped mt-3">
                        <thead>
                            <tr>
                                <th scope="col">Iteración</th>
                                <th scope="col">Error</th>
                                <th scope="col" *ngFor="let col of iteraciones[0].x; let i = index">x{{i + 1}}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let punto of iteraciones">
                                <td>{{ punto.iteration }}</td>
                                <td>{{ punto.error | number:'1.2e-2' }}</td>
                                <td *ngFor="let x of punto.x">{{ x | number:'1.6-6' }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Mensajes de error -->
                <div *ngIf="errorMessage" class="alert alert-danger mt-3">
                    {{ errorMessage }}
                </div>
            </div>
        </div>
    </div>
</div>
